{"remainingRequest":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\src\\components\\shike\\Cart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\src\\components\\shike\\Cart.vue","mtime":1572003774000},{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\项目\\食客项目\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.dele{\r\n    margin-left:50%;\r\n}\r\n.hjq{\r\n    margin-left:0px;\r\n    color:#ff7223;\r\n  }\r\n\r\n.gtt{\r\n   \r\n    width:40px;\r\n    height:30px;\r\n    margin-left:10px;\r\n    margin-top:5px;\r\n  \r\n}\r\n.Bott{\r\n    width:80px;height:40px;\r\n    display: flex;\r\n    line-height: 40px;\r\n    align-items: center;\r\n    margin-left:10px;\r\n}\r\n.Img{\r\n    width:25px;height:25px;\r\n    margin-right:0px;\r\n}\r\n.Carttop{\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin-top:30px;\r\n    border-bottom: 1px solid #f3f3f3;\r\n   \r\n}\r\n.Xuan{\r\n    width:25px;\r\n    height:25px;\r\n    margin-top:20px;\r\n    margin-left:0px;\r\n    display: flex;\r\n}\r\n.Xuan-true{\r\n    width:100%;\r\n}\r\n.List{\r\n    width:80px;height:80px;\r\n    margin-left:-15px;\r\n}\r\n.List-true{\r\n    width:100%;\r\n}\r\n.Input{\r\n    width:15px;\r\n    height:15px;\r\n    text-align: center;\r\n    border:none;\r\n}\r\n.Shu{\r\n    width:18px;height:18px;\r\n    display:inline-block;\r\n    border:1px solid #f3f3f3;\r\n    text-align: center;\r\n    line-height: 18px;\r\n}\r\n.Font-one{\r\n    font-size:1rem;\r\n}\r\n.Font-two{\r\n    color:#FF7100\r\n}\r\n.Shuli{\r\n    margin-top:20px;\r\n}\r\n.tit{\r\n    margin-left:-20px;\r\n}\r\n.shopping{\r\n    width:100%;\r\n    height:40px;\r\n    background: #f3f3f3;\r\n    align-items: center;\r\n    display: flex;\r\n     \r\n}\r\n.Bot{\r\n    width:100%;\r\n    display: flex;\r\n    position: fixed;\r\n    top:620px;\r\n}\r\n.jiesuan{\r\n    width:80px;height:40px;\r\n    background: #FF7100;\r\n    color:#fff;\r\n    text-align: center;\r\n    line-height: 40px;\r\n    margin-left:90px;\r\n    border-radius: 5px;\r\n}\r\n.heji{\r\n    line-height: 40px;\r\n    display: flex;\r\n    \r\n}\r\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Cart.vue","sourceRoot":"src\\components\\shike","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"shopping\">\r\n            <router-link to=\"/Login\"><img src=\"../../img/zuojiantou.png\"  class=\"gtt\"></router-link>\r\n          <div>购物车</div>\r\n          <button @click=\"delm\" class=\"dele\">删除所选</button>\r\n      </div>\r\n       <div class=\"Carttop\" v-for=\"(item,i) of list\" :key=\"i\" >\r\n           <div class=\"Xuan\">\r\n               <input @change=\"selectItem\" type=\"checkbox\" v-model=\"item.cb\">\r\n           </div>\r\n           <div class=\"List\"><img :src=\"'http://127.0.0.1:4000/'+item.pic\" class=\"List-true\"></div>\r\n           <div class=\"tit\">\r\n               <p class=\"Font-one\">{{item.title}}</p>\r\n               <p class=\"Font-two\">￥{{item.price}}.00</p>\r\n           </div>\r\n           <div class=\"Shuli\">\r\n               <span class=\"Shu\" @click=\"reduce(i)\">-</span>\r\n               <input type=\"text\" v-model=\"item.count\" class=\"Input\">\r\n               <span class=\"Shu\" @click=\"add(i)\">+</span>\r\n           </div>\r\n           <div class=\"Xuan\">\r\n               <img src=\"../../img/delete.png\" class=\"Xuan-true\" @click=\"del\" :data-id=\"item.iid\">\r\n           </div>\r\n       </div>\r\n       <div class=\"Bot\">\r\n           <div class=\"Bott\">\r\n               <input @change=\"selectAll\" type=\"checkbox\" v-model=\"allcb\">\r\n           </div>\r\n           <div class=\"heji\">\r\n              <div>合计</div>\r\n              <span class=\"hjq\">￥{{sum}}.00</span>\r\n           </div>\r\n           <div class=\"jiesuan\">结算</div>\r\n       </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n           list:[],\r\n           allcb:false\r\n        }\r\n    },\r\n   created(){//1:添加生命周期\r\n   this.load();\r\n       \r\n   },\r\n   methods:{\r\n       \r\n        selectItem(){\r\n      //累加商品状态\r\n      //创建变量\r\n      var sum=0;\r\n      //创建循环遍历商品状态\r\n      if(this.list!==undefined){\r\n        for(var item of this.list){\r\n          if(item.cb){\r\n            sum++;\r\n          }\r\n        }\r\n      }\r\n      console.log(sum);\r\n      console.log(this.list.length);\r\n      //如果选中数量与数组相同，将全选\r\n      //allcb=true;\r\n      if(sum==this.list.length){\r\n        this.allcb=true;\r\n      }else{\r\n        this.allcb=false;\r\n      }\r\n    },\r\n       selectAll(event){\r\n       //添加参数event\r\n       //获取当前全选按钮状态\r\n       var all=event.target.checked;\r\n      // console.log(all);\r\n      for(var item of this.list){\r\n        item.cb=all;\r\n      }//赋值所有商品cb\r\n     },\r\n           //删除指定商品\r\n    delm(){\r\n      //显示交互提示框，请用户再次确认是否删除指定商品\r\n      this.$messagebox.confirm(\"是否删除指定的商品\")\r\n      .then(res=>{\r\n        //选择确认  创建空字符串\r\n        var str=\"\";\r\n      //创建遍历list数组判断如果当前cb值为true将对象编号拼接\r\n      for(var item of this.list){\r\n        if(item.cb){\r\n          str+=item.lid+\",\"\r\n        }\r\n      }\r\n      console.log(str);\r\n      //判断用户是否选择选中商品提示请选择要删除商品\r\n      if(str.length==0){\r\n        this.$messagebox(\"请选择要删除的商品\");\r\n        console.log(111)\r\n        return;\r\n      }\r\n      //0 起始下标  str.length-1 保存几个字符串\r\n      str=str.substring(0,str.length-1);\r\n      console.log(222);\r\n      //创建url\r\n      var url=\"delm\";\r\n      var obj={lid:str};\r\n      this.axios.get(url,{params:obj})\r\n      .then(res=>{\r\n        //console.log(res);\r\n        //再重新加载购物车\r\n        console.log(333)\r\n        this.load();\r\n        //提示删除成功\r\n        this.$toast(\"删除成功\");\r\n      })\r\n      }).catch(err=>{})\r\n    },\r\n       del(event){\r\n       //1.为删除按钮添加自定义属性\r\n       //data-id 保存当前购物车商品id\r\n       //2.添加点击事件 click del\r\n       //2.1交互提示：是否删除商品\r\n       this.$messagebox.confirm(\"是否删除指定商品\").then(res=>{\r\n       //回调函数\r\n       //3.获取当前商品id \r\n       var iid=event.target.dataset.id;\r\n       //4.输出id\r\n       console.log(iid);\r\n       //5.发送ajax请求\r\n        var url=\"del\";\r\n        var obj={iid};\r\n        this.axios.get(url,{params:obj}).then(res=>{\r\n            //6.获取服务器端返回数据\r\n            console.log(res)\r\n            if(res.data.code==1){\r\n            //7.提示删除成功\r\n            this.$toast(\"删除成功\");\r\n            //8.重新调用load\r\n            this.load();\r\n           }\r\n        });     \r\n       }).catch(err=>{\r\n           //取消\r\n       })\r\n       },\r\n       reduce(i){\r\n         if(this.list[i].count>1){\r\n            this.list[i].count--;\r\n         }\r\n       },\r\n       add(i){\r\n           if(this.list[i].count){\r\n               this.list[i].count++;\r\n           }\r\n       },\r\n           load(){\r\n               var url=\"findcart\";\r\n               this.axios.get(url).then(res=>{\r\n                   console.log(res);\r\n                   if(res.data.code==-1){\r\n                       this.$messagebox(\"请登录\").then(res=>{\r\n                           this.$router.push(\"/Login\");\r\n                       })\r\n                   }else{\r\n                       var list=res.data.data;\r\n                       if(list!==undefined){\r\n                           for(var item of list){\r\n                               item.cb=false;\r\n                           }\r\n                       }\r\n                       this.list=list;\r\n                       console.log(this.list);\r\n                   }\r\n               })\r\n           }\r\n       },\r\n    computed:{\r\n    sum(){\r\n      var total=0;\r\n      for(var i=0;i<this.list.length;i++){\r\n        total+=parseFloat(this.list[i].price)*parseFloat(this.list[i].count);\r\n      }\r\n      return total;//计算总价\r\n    }\r\n  }\r\n\r\n   }\r\n\r\n</script>\r\n<style>\r\n.dele{\r\n    margin-left:50%;\r\n}\r\n.hjq{\r\n    margin-left:0px;\r\n    color:#ff7223;\r\n  }\r\n\r\n.gtt{\r\n   \r\n    width:40px;\r\n    height:30px;\r\n    margin-left:10px;\r\n    margin-top:5px;\r\n  \r\n}\r\n.Bott{\r\n    width:80px;height:40px;\r\n    display: flex;\r\n    line-height: 40px;\r\n    align-items: center;\r\n    margin-left:10px;\r\n}\r\n.Img{\r\n    width:25px;height:25px;\r\n    margin-right:0px;\r\n}\r\n.Carttop{\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin-top:30px;\r\n    border-bottom: 1px solid #f3f3f3;\r\n   \r\n}\r\n.Xuan{\r\n    width:25px;\r\n    height:25px;\r\n    margin-top:20px;\r\n    margin-left:0px;\r\n    display: flex;\r\n}\r\n.Xuan-true{\r\n    width:100%;\r\n}\r\n.List{\r\n    width:80px;height:80px;\r\n    margin-left:-15px;\r\n}\r\n.List-true{\r\n    width:100%;\r\n}\r\n.Input{\r\n    width:15px;\r\n    height:15px;\r\n    text-align: center;\r\n    border:none;\r\n}\r\n.Shu{\r\n    width:18px;height:18px;\r\n    display:inline-block;\r\n    border:1px solid #f3f3f3;\r\n    text-align: center;\r\n    line-height: 18px;\r\n}\r\n.Font-one{\r\n    font-size:1rem;\r\n}\r\n.Font-two{\r\n    color:#FF7100\r\n}\r\n.Shuli{\r\n    margin-top:20px;\r\n}\r\n.tit{\r\n    margin-left:-20px;\r\n}\r\n.shopping{\r\n    width:100%;\r\n    height:40px;\r\n    background: #f3f3f3;\r\n    align-items: center;\r\n    display: flex;\r\n     \r\n}\r\n.Bot{\r\n    width:100%;\r\n    display: flex;\r\n    position: fixed;\r\n    top:620px;\r\n}\r\n.jiesuan{\r\n    width:80px;height:40px;\r\n    background: #FF7100;\r\n    color:#fff;\r\n    text-align: center;\r\n    line-height: 40px;\r\n    margin-left:90px;\r\n    border-radius: 5px;\r\n}\r\n.heji{\r\n    line-height: 40px;\r\n    display: flex;\r\n    \r\n}\r\n</style>\r\n"]}]}